# Installation and usage

## Add a package refference
To get started with AssGen, you will first need to add a package refference to the **.csproj** file for your mod. This file will be located in the root folder of your mod and very likely have the same name as it. For example, if your mod is "MyEpicMod", you're looking for "MyEpicMod.cs".

Once open, you'll want to add the following line to the ``<ItemGroup>`` containing refferences

```xml
<PackageReference Include="AssGen" OutputItemType="Analyzer" ReferenceOutputAssembly="false" />
```

This will tell compilers and IDEs to refference the AssGen NuGet package for your mod! You'll have to add this manually to mark it as an ``Analyzer``, which is important because AssGen is a [Source Generator](https://learn.microsoft.com/en-us/dotnet/csharp/roslyn-sdk/source-generators-overview).

## Create a configuration file
The next step is to create a file named ``AssGenConfig.txt`` in your mod folder. This file tells AssGen where your assets actually are!

Next we need to populate the file, currently it takes a single option ``AssetRoot``. In most cases, this will just be the name of your mod folder, but if you have a seperate assets folder within your mod, you can use that instead. As an example, the config file for Starlight River looks like this:
```
AssetRoot:StarlightRiver\Assets
```
Your mod's may look more like
```
AssetRoot:MyModName
```

## Use the autogenerated assets
Now that you've installed and configured AssGen, you should be able to start using it after a rebuild of your project. Whenever you add a new .png file to your asset path, AssGen will automatically update.

In order to access an asset, lets say for example ``MyMod/Stuff/CoolImage.png``, you can get a ``ReLogic.Content.Asset<Texture2D>`` via the code:
```cs
Assets.Stuff.CoolImage
```

Since AssGen generates a [Global Using](https://blog.jetbrains.com/dotnet/2021/11/18/global-usings-in-csharp-10/), you dont need to do anything to import the generated namespace in your mod. This makes AssGen virtually plug-and-play after setup.

A more contextual example follows below:

```cs
using System;
using Terraria;
using Terraria.ModLoader;
using Microsoft.Xna.Framework;
// No need to import AssGen!

namespace MyMod.Stuff
{
  // Lets create a simple ModItem to act as an example
  public class MyThing : ModItem
  {
    // Common hooks like SetDefaults have been omitted here for the sake of relevance and brevity

    // We'll override a drawing method for the purpose of demonstration
    public override bool PreDrawInWorld(SpriteBatch spriteBatch, Color lightColor, Color alphaColor, ref float rotation, ref float scale, int whoAmI)
    {
      // Lets get our texture located at MyMod/Stuff/CoolImage.png
      var tex = Assets.Stuff.CoolImage.Value; // Use AssGen to get our asset, then load it via .Value;
      spriteBatch.Draw(tex, Item.Center - Main.screenPosition, Color.White); // Now we draw our image in the world
    }
  }
}
